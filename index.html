<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Will you be my Valentine?</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíï</text></svg>">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    :root {
      --bg-start: #faf5f8;
      --bg-frustrated-1: #ffe8ec;
      --bg-frustrated-2: #ffd6dd;
      --bg-frustrated-3: #ffc5d0;
      --yes-color: #ff9ebc;
      --no-color: #f5f5f5;
      --text-main: #1a1a1a;
      --text-sub: #666;
      --card-bg: #ffffff;
      --canvas-bg: #f9f4f7;
    }

    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100svh;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--bg-start);
      transition: background-color 1s ease;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      overflow: hidden;
    }

    .card {
      width: 96vw;
      max-width: 650px;
      background: var(--card-bg);
      padding: 40px 25px;
      border-radius: 30px;
      text-align: center;
      box-shadow: 0 15px 60px rgba(0,0,0,0.06);
      position: relative;
      z-index: 10;
    }

    .gif-container {
      width: min(380px, 90vw);
      height: 260px;
      margin: 0 auto 30px;
      background: var(--canvas-bg);
      border-radius: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      border: 3px solid #f0eaed;
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.03);
    }

    .character-img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    h1 {
      font-size: clamp(1.8rem, 5vw, 2.4rem);
      margin: 20px 0 15px;
      color: var(--text-main);
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    #subtitle {
      font-size: clamp(1.25rem, 4vw, 1.5rem);
      color: var(--text-sub);
      min-height: 2em;
      margin-bottom: 35px;
      font-style: italic;
      font-weight: 500;
      line-height: 1.4;
    }

    .btn-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 25px;
      min-height: 120px;
      position: relative;
    }

    button {
      padding: 20px 45px;
      font-size: 20px;
      font-weight: 700;
      border: none;
      border-radius: 60px;
      cursor: pointer;
      transition: all 0.3s ease;
      touch-action: manipulation;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      letter-spacing: 0.3px;
    }

    #yesBtn {
      background: linear-gradient(135deg, var(--yes-color) 0%, #ffb3cc 100%);
      color: white;
      z-index: 100;
      position: relative;
      transform-origin: center center;
    }

    #noBtn {
      background-color: var(--no-color);
      color: #666;
      position: relative;
      z-index: 90;
    }

    #noBtn.bouncing {
      position: fixed;
      transition: none;
    }

    .sticker {
      position: fixed;
      width: 130px;
      height: 130px;
      pointer-events: none;
      opacity: 0 !important;
      z-index: 50;
      object-fit: contain;
      transition: opacity 0.7s ease;
      display: none;
    }

    #celebration {
      display: none;
      position: relative;
    }

    #celebration h1 {
      font-size: clamp(2.5rem, 8vw, 3.5rem);
      color: #ff3b7a;
      margin-bottom: 25px;
      animation: celebratePulse 1.2s ease-in-out infinite;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    #bigYesText {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: clamp(3rem, 10vw, 5.5rem);
      font-weight: 900;
      color: #ff3b7a;
      z-index: 200;
      opacity: 0;
      text-shadow: 0 0 30px rgba(255, 59, 122, 0.4);
      animation: slideInBounce 2.5s ease-in-out infinite;
      text-transform: uppercase;
      letter-spacing: 3px;
    }

    @keyframes slideInBounce {
      0% { opacity: 0; transform: translate(-50%, -70%) scale(0.3); }
      40% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
      50% { transform: translate(-50%, -50%) scale(0.95); }
      60% { transform: translate(-50%, -50%) scale(1); }
      100% { opacity: 0; transform: translate(-50%, -30%) scale(0.8); }
    }

    @keyframes celebratePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.08); }
    }

    .celebration-gif {
      width: 100%;
      max-width: 400px;
      border-radius: 24px;
      margin-top: 25px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }

    #confettiCanvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 999;
    }

    .celebration-sticker {
      position: fixed;
      width: 130px;
      height: 130px;
      object-fit: contain;
      opacity: 0;
      z-index: 150;
      animation: popInSticker 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
      display: none;
    }

    @keyframes popInSticker {
      0% { opacity: 0; transform: scale(0) rotate(-180deg); }
      100% { opacity: 1; transform: scale(1) rotate(0deg); }
    }
  </style>
</head>
<body>
  <canvas id="confettiCanvas"></canvas>
  
  <img class="sticker" id="stickerA" src="a.png">
  <img class="sticker" id="stickerB" src="b.png">

  <img class="celebration-sticker" id="stickerC" src="c.png" style="top: 20%; left: 8%;">
  <img class="celebration-sticker" id="stickerD" src="d.png" style="top: 15%; right: 8%;">
  <img class="celebration-sticker" id="stickerE" src="e.png" style="bottom: 20%; left: 12%;">
  <img class="celebration-sticker" id="stickerF" src="f.png" style="bottom: 18%; right: 10%;">

  <div id="bigYesText" style="display: none;">She Said Yes!!!</div>

  <audio id="celebrationSound" src="crowd-celebration.mp3" preload="auto"></audio>

  <main class="card" id="mainCard">
    <div id="question-content">
      <div class="gif-container">
        <img src="1.gif" class="character-img" id="mainImg">
      </div>
      
      <h1>Arya, will you be my valentine?</h1>
      <p id="subtitle">Please say yes ‚ú®</p>

      <div class="btn-container" id="btnContainer">
        <button id="yesBtn">Yes</button>
        <button id="noBtn">No</button>
      </div>
    </div>

    <div id="celebration">
      <h1>Hell Yeah</h1>
      <img src="https://media1.tenor.com/m/CMAUbqPnTb4AAAAd/gi-hun-in-ho.gif" class="celebration-gif">
    </div>
  </main>

  <script>
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const subtitle = document.getElementById('subtitle');
    const mainImg = document.getElementById('mainImg');
    const body = document.body;
    const stickerA = document.getElementById('stickerA');
    const stickerB = document.getElementById('stickerB');
    const celebrationSound = document.getElementById('celebrationSound');

    let noCount = 0;
    let yesScale = 1;
    let dvdMode = false;
    let dvdX = 0, dvdY = 0;
    let dvdSpeedX = 2, dvdSpeedY = 2;
    let animationFrame;

    const phrases = [
      "WHAAAT!?",
      "Come on!!",
      "Pleaaaseeee!",
      "I'll take care of you",
      "I will get you MacD fries",
      "I'll give you chocolatesss",
      "You're just enjoying this aren't you?",
      "Let's see how much you can deny üòè",
      "Ab krke dikha",
      "Oww hell naaa",
      "Now? üòé",
      "Are you serious üíî",
      "COME ON NOWW!!!",
      "PLEASE! I CAN'T LIVE WITHOUT YOU",
      "What you gonna do now? Hah üòô"
    ];

    const gifUrls = {
      1: "https://media1.tenor.com/m/TRxTAkbe39QAAAAd/oh-hell-nah-no.gif",
      2: "https://media1.tenor.com/m/z4ukCIqmzR8AAAAd/omg-what.gif",
      3: "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnl3ZTAzd3hvNmxsNTVjcDBoeDdtZmYwZG43NG5ma2N6Z3l6bm5hbiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/lauLuhNJpTBrjPdTFb/giphy.gif",
      4: "https://media1.tenor.com/m/gYw4XiQtMsUAAAAd/really-bruh.gif",
      5: "https://media1.tenor.com/m/5wypIfJTdOkAAAAd/shocked-dog-good-dog.gif",
      6: "https://media.tenor.com/UNaQFutfOF0AAAAj/banana-crying-cat.gif",
      7: "https://media.tenor.com/UNaQFutfOF0AAAAj/banana-crying-cat.gif",
      8: "https://media1.tenor.com/m/V36VabT3tXAAAAAd/why-are-you-serious.gif",
      9: "https://images.meme-arsenal.com/71c0e0900d585e65a5acbd5e47d83cbb.jpg",
      10: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExcGRuMGs0ZnUyc2JjeHN4amc5bDJtd3BodHR5ZmR2MHpleThpem0xbyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/m8fyrgnXwXV5EHw6Lm/giphy.gif	",
      11: "https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExNnlqMGt5eGNiOW9nNG92eTkwaHZjMWt2ODkza2RkdHFobnhpdDVsNCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/43wR1f8QU9KApWKjYt/giphy.gif",
      12: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExZHh4djVlaDBvMDFvMXR5dmM1ZDR4NnQwbjAyenI3YTBmMnJjNTY4MSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3orieTfp1MeFLiBQR2/giphy.gif",
      13: "https://media1.tenor.com/m/gYw4XiQtMsUAAAAd/really-bruh.gif",
      14: "https://media1.tenor.com/m/wk8ueqUDJBsAAAAC/cat-cry-cute.gif",
      15: "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExNDgwb3VtM3VoNGl4aTZwcWJlcG90czFnYXJtZXBrOGVxanRvZXM1ayZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/78XCFBGOlS6keY1Bil/giphy.gif"
    };

    function playPopSound() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = 800;
      oscillator.type = 'sine';
      
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.1);
    }

    function handleNo(event) {
      noCount++;
      
      playPopSound();
      
      if (navigator.vibrate) {
        navigator.vibrate(50);
      }
      
      if (noCount <= phrases.length) {
        subtitle.innerText = phrases[noCount - 1];
      }

      if (gifUrls[noCount]) {
        mainImg.src = gifUrls[noCount];
      }

      if (yesScale < 3) {
        yesScale += 0.4;
        yesBtn.style.transform = `scale(${yesScale})`;
      } else if (yesScale < 6) {
        yesScale += 0.3;
        yesBtn.style.transform = `scale(${yesScale})`;
      }

      switch(noCount) {
        case 3:
          showStickerA();
          break;
        case 5:
          body.style.backgroundColor = "#ffe8ec";
          break;
        case 6:
          showStickerB(event);
          break;
        case 7:
          startDVDMode();
          break;
        case 8:
          dvdSpeedX = 5;
          dvdSpeedY = 5;
          break;
        case 10:
          body.style.backgroundColor = "#ffd6dd";
          break;
        case 12:
          dvdSpeedX = 10;
          dvdSpeedY = 10;
          break;
        case 14:
          body.style.backgroundColor = "#ffc5d0";
          break;
        case 15:
          dvdSpeedX = 20;
          dvdSpeedY = 20;
          break;
      }

      if (!dvdMode && noCount < 7) {
        moveNoButtonRandomly();
      }
    }

    function showStickerA() {
      const yesRect = yesBtn.getBoundingClientRect();
      stickerA.style.display = 'block';
      stickerA.style.left = `${yesRect.right + 10}px`;
      stickerA.style.top = `${yesRect.top - 20}px`;
      stickerA.style.opacity = "1";
    }

    function showStickerB(event) {
      let clickX, clickY;
      if (event.clientX !== undefined) {
        clickX = event.clientX;
        clickY = event.clientY;
      } else if (event.touches && event.touches.length > 0) {
        clickX = event.touches[0].clientX;
        clickY = event.touches[0].clientY;
      } else {
        const noRect = noBtn.getBoundingClientRect();
        clickX = noRect.left;
        clickY = noRect.top;
      }
      
      stickerB.style.display = 'block';
      stickerB.style.left = `${clickX - 65}px`;
      stickerB.style.top = `${clickY - 65}px`;
      stickerB.style.opacity = "1";
    }

    function moveNoButtonRandomly() {
      const maxX = window.innerWidth - noBtn.offsetWidth - 20;
      const maxY = window.innerHeight - noBtn.offsetHeight - 20;

      const randomX = Math.floor(Math.random() * maxX) + 10;
      const randomY = Math.floor(Math.random() * maxY) + 10;

      noBtn.style.position = 'fixed';
      noBtn.style.left = randomX + 'px';
      noBtn.style.top = randomY + 'px';
    }

    function startDVDMode() {
      dvdMode = true;
      noBtn.classList.add('bouncing');
      
      const noRect = noBtn.getBoundingClientRect();
      dvdX = noRect.left;
      dvdY = noRect.top;

      animateDVD();
    }

    function animateDVD() {
      if (!dvdMode) return;

      const btnWidth = noBtn.offsetWidth;
      const btnHeight = noBtn.offsetHeight;
      const maxX = window.innerWidth - btnWidth;
      const maxY = window.innerHeight - btnHeight;

      dvdX += dvdSpeedX;
      dvdY += dvdSpeedY;

      if (dvdX <= 0 || dvdX >= maxX) {
        dvdSpeedX *= -1;
        dvdX = Math.max(0, Math.min(dvdX, maxX));
      }
      if (dvdY <= 0 || dvdY >= maxY) {
        dvdSpeedY *= -1;
        dvdY = Math.max(0, Math.min(dvdY, maxY));
      }

      noBtn.style.left = dvdX + 'px';
      noBtn.style.top = dvdY + 'px';

      animationFrame = requestAnimationFrame(animateDVD);
    }

    let lastTriggerTime = 0;

    noBtn.addEventListener('touchstart', (e) => {
      e.preventDefault();
      const now = Date.now();
      if ((now - lastTriggerTime) > 400) {
        lastTriggerTime = now;
        handleNo(e);
      }
    });

    noBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const now = Date.now();
      if ((now - lastTriggerTime) > 400) {
        lastTriggerTime = now;
        handleNo(e);
      }
    });

    yesBtn.addEventListener('click', () => {
      dvdMode = false;
      if (animationFrame) cancelAnimationFrame(animationFrame);

      if (navigator.vibrate) {
        navigator.vibrate([200, 100, 200, 100, 200]);
      }

      document.getElementById('question-content').style.display = 'none';
      document.getElementById('celebration').style.display = 'block';
      noBtn.style.display = 'none';
      body.style.backgroundColor = "#faf5f8";

      const bigText = document.getElementById('bigYesText');
      bigText.style.display = 'block';

      celebrationSound.play().catch(err => console.log("Audio autoplay prevented"));

      confetti({
        particleCount: 200,
        spread: 80,
        origin: { y: 0.6 },
        colors: ['#ff9ebc', '#ffb3cc', '#ffc8d9', '#ff85ab']
      });

      setTimeout(() => { stickerC.style.display = 'block'; stickerC.style.opacity = '1'; }, 400);
      setTimeout(() => { stickerD.style.display = 'block'; stickerD.style.opacity = '1'; }, 700);
      setTimeout(() => { stickerE.style.display = 'block'; stickerE.style.opacity = '1'; }, 1000);
      setTimeout(() => { stickerF.style.display = 'block'; stickerF.style.opacity = '1'; }, 1300);

      setInterval(() => {
        confetti({
          particleCount: 80,
          spread: 60,
          origin: { y: 0.7 },
          colors: ['#ff9ebc', '#ffb3cc', '#ffc8d9']
        });
      }, 2500);
    });
  </script>
</body>
</html>
