<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Will you be my Valentine?</title>
  
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      /* --- CHANGE COLORS HERE --- */
      --bg-start: #ffd6e7; 
      --bg-frustrated: #ffb3b3; 
      --yes-color: #ff3b7a;
      --text-main: #111827;
      --text-sub: #4b5563; 
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100svh;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--bg-start);
      transition: background-color 0.5s ease;
      font-family: system-ui, -apple-system, sans-serif;
      overflow: hidden; /* Prevents scrollbars when button moves */
    }

    .card {
      width: min(500px, 95vw);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      padding: 40px 20px;
      border-radius: 30px;
      text-align: center;
      box-shadow: 0 20px 50px rgba(0,0,0,0.1);
      position: relative;
      z-index: 10;
    }

    /* THE MAIN IMAGE (OWL/CAT/ETC) */
    .character-img {
      width: 150px;
      height: 150px;
      margin-bottom: 20px;
      object-fit: contain;
    }

    h1 {
      font-size: 2rem;
      margin: 10px 0;
      color: var(--text-main);
    }

    #subtitle {
      /* INCREASED FONT SIZE AS REQUESTED */
      font-size: 1.2rem; 
      color: var(--text-sub);
      min-height: 1.5em;
      margin-bottom: 30px;
      font-style: italic;
      font-weight: 500;
    }

    .btn-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      min-height: 200px;
      position: relative; /* Needed for absolute positioning of No button */
    }

    button {
      padding: 15px 30px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.2s;
      touch-action: manipulation;
    }

    #yesBtn {
      background-color: var(--yes-color);
      color: white;
      z-index: 100;
    }

    #noBtn {
      background-color: #e5e7eb;
      color: #374151;
      /* FIX FOR MISSING BUTTON: Initial position relative to container */
      position: absolute; 
      top: 50%;
      right: 20%; 
      transform: translateY(-50%);
    }

    /* POPUP STICKER (Hidden by default) */
    #popupSticker {
      position: absolute;
      width: 100px; /* Adjust sticker size */
      pointer-events: none; /* Let clicks pass through it */
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 50;
    }

    #celebration { display: none; }
    .celebration-gif { width: 100%; max-width: 300px; border-radius: 15px; margin-top: 20px; }
    #confettiCanvas { position: fixed; inset: 0; pointer-events: none; z-index: 999; }

  </style>
</head>
<body>

  <canvas id="confettiCanvas"></canvas>

  <img id="popupSticker" src="sticker1.png" alt="Sticker">

  <main class="card" id="mainCard">
    <div id="question-content">
      
      <img src="1.gif" alt="Character" class="character-img" id="mainImg">
      
      <h1>Arya, will you be my valentine?</h1>
      
      <p id="subtitle">I promise it'll be fun! ‚ú®</p>

      <div class="btn-container" id="btnContainer">
        <button id="yesBtn">Yes</button>
        <button id="noBtn">No</button>
      </div>
    </div>

    <div id="celebration">
      <h1>YAY! ‚ù§Ô∏è</h1>
      <p>I knew you'd say yes!</p>
      
      <img src="celebration.gif" alt="Success" class="celebration-gif">
    </div>
  </main>

  <script>
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const subtitle = document.getElementById('subtitle');
    const mainImg = document.getElementById('mainImg');
    const popupSticker = document.getElementById('popupSticker');
    const body = document.body;

    let noCount = 0;
    let yesScale = 1;

    // --- CHANGE THIS HERE (SUBTITLES) ---
    const phrases = [
      "TF CLICK YES!",
      "Come on!!",
      "I'll give you chocolates!",
      "I'll take care of you",
      "I will get you MacD fries",
      "Come on üíî",
      "You're just enjoying aren't you",
      "I'll keep asking",
      "Because",
      "You are mine heh",
      "Look how big the Yes button is getting!",
      "Just click the big pink one already!"
    ];

    // --- CHANGE THIS HERE (GIF FILES LOOP) ---
    // Ensure you upload files named exactly: 1.gif, 2.gif, ... up to 15.gif
    // If you have fewer files, reduce the number '15' in the logic below.
    const totalGifs = 15; 

    function handleNo(event) {
      noCount++;
      
      // 1. Update Subtitle
      const phraseIndex = Math.min(noCount - 1, phrases.length - 1);
      subtitle.innerText = phrases[phraseIndex];

      // 2. Cycle Main Image (1.gif -> 2.gif -> ... -> 15.gif -> 1.gif)
      // Logic: Modulo operator (%) loops the number back to 1 after 15
      const imageNumber = (noCount % totalGifs) + 1; 
      mainImg.src = `${imageNumber}.gif`; 

      // 3. Grow Yes Button
      if (yesScale < 25) {
        yesScale += 1.5; 
        yesBtn.style.transform = `scale(${yesScale})`;
      }

      // 4. Background Color Change
      if (noCount === 3) body.style.backgroundColor = "#ffc2c2";
      if (noCount === 6) body.style.backgroundColor = "#ffadad";
      if (noCount >= 9) body.style.backgroundColor = "#ff9494";

      // 5. Show Sticker at Specific Count (e.g., 5th No)
      // CHANGE THIS HERE: Change '5' to whichever click number you want the sticker to appear
      if (noCount === 5) {
        popupSticker.style.opacity = "1";
        
        // Position sticker near the click event
        // We use clientX/Y from the event (mouse or touch)
        let clickX = event.clientX || (event.touches ? event.touches[0].clientX : window.innerWidth/2);
        let clickY = event.clientY || (event.touches ? event.touches[0].clientY : window.innerHeight/2);

        popupSticker.style.left = `${clickX - 50}px`; // Center it roughly
        popupSticker.style.top = `${clickY - 50}px`;
      }

      // 6. Move No Button
      const container = document.getElementById('btnContainer');
      const maxX = container.clientWidth - noBtn.clientWidth;
      const maxY = container.clientHeight - noBtn.clientHeight;

      const randomX = Math.floor(Math.random() * maxX);
      const randomY = Math.floor(Math.random() * maxY);

      noBtn.style.left = randomX + 'px';
      noBtn.style.top = randomY + 'px';
    }

    // Event Listeners
    // We pass 'e' (the event) to handleNo so we know where the mouse was for the sticker
    noBtn.addEventListener('mouseover', (e) => handleNo(e)); 
    noBtn.addEventListener('touchstart', (e) => {
      e.preventDefault(); 
      handleNo(e);
    });

    // Yes Button Click
    yesBtn.addEventListener('click', () => {
      document.getElementById('question-content').style.display = 'none';
      document.getElementById('celebration').style.display = 'block';
      body.style.backgroundColor = "#ffd6e7"; 
      
      confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 }
      });
    });

  </script>
</body>
</html>
